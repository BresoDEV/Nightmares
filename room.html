<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="movimentacao.js"></script>
    <title>Nightmares Game</title>
</head>


<body>
    <div id="lanterna">
        <div id="reveal">
            <img id="cenario" src="imgs/fundo.jpg" alt="" class="fundo">
        </div>
    </div>
    <br>
    <br>
    <center>
        <footer class="alerta" id="alerta"></footer>

    </center>
    <div class="alerta2" id="alerta2"></div>
    <div class="alerta3" id="alerta3"></div>
</body>

<script>

    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);


    var debugmenuBool = false;


    var dificuldade = 'facil';
    //if (localStorage.getItem('dificuldade')) {
    //    dificuldade = localStorage.getItem('dificuldade');
    //}
    var radioLigado = false;
    var radio;

    var nomeNota = 'nota1.jpg';


    const cenario = document.getElementById('cenario');
    var lado = 1;
    var quartoAtual = 1;
    var xMouse = 0;
    var yMouse = 0;
    var mensagem = document.getElementById('alerta');
    var mensagem2 = document.getElementById('alerta2');
    var mensagem3 = document.getElementById('alerta3');

    var debugmenu = debugMenu();

    var mapaSendoExibido = false;


    var visualizou_anotacaoEstranha = '0';

    var tempoEspera = 0;
    var tempoEspera_concluido = false;
    var ultimoTelefonema = false;

    var carregouTudo = false;


    switch (lado) {
        case 1: cenario.src = 'rooms/' + quartoAtual + '/1.jpg'; break;
        case 2: cenario.src = 'rooms/' + quartoAtual + '/2.jpg'; break;
        case 3: cenario.src = 'rooms/' + quartoAtual + '/3.jpg'; break;
        case 4: cenario.src = 'rooms/' + quartoAtual + '/4.jpg'; break;
    }


    //-----------------------------------------------


    const telaX = document.body.clientWidth;
    const telaY = document.body.clientHeight;

    //const telaX_1 = (telaX /2)/2;
    //const telaX_2 = (telaX /2)+telaX_1;

    const telaX_1 = (telaX / 2) - 50;
    const telaX_2 = (telaX / 2) + 50;

    const telaY_1 = 0;
    const telaY_2 = (telaY / 2) /2;

    document.addEventListener('mousemove',(x)=>{
        console.log(x.clientX);
    });


    let startX;
    let startY;
    let delta;



    document.addEventListener('touchmove', (x) => {
        const cX = x.touches[0].clientX;
        delta = cX - startX;

    });
    document.addEventListener('touchstart', (x) => {
        startX = x.touches[0].clientX;
        startY = x.touches[0].clientY;
    });

    document.addEventListener('touchend', (x) => {
        if (startX >= telaX_1 && startX <= telaX_2 && startY <= telaY_2) {
            console.log('Dentro');
            andarFrente();
        }
        else if (startY <= telaY_2) {
            console.log('Lado');
            if (delta > 0) {
                if (lado == 4)
                    lado = 1;
                else
                    lado++;
            } else if (delta < 0) {
                if (lado == 1)
                    lado = 4;
                else
                    lado--;

            }
        }

        RecarregarParedes();
    });



    //-----------------------------------------------
    function MostrarNota() {
        var nota = document.createElement('img');
        nota.src = 'imgs/' + nomeNota;
        nota.style.left = '35%';
        nota.style.width = '30%';
        nota.style.height = '300px';
        nota.style.top = '25%';
        nota.style.position = 'fixed';
        document.body.append(nota);

        nota.addEventListener('click', () => {
            nota.remove();
        });

        if (anotacaoEstranha === '1') {
            if (visualizou_anotacaoEstranha === '0') {
                som('terror.mp3');
                msgEstatica('-Que porra é essa?! <br>-Preciso comunicar o Julio!!', 5000);
                visualizou_anotacaoEstranha = '1';
                localStorage.setItem('visualizou_anotacaoEstranha', '1');
            }
            else {
                msgEstatica('-Muito estranho isso...', 5000);
            }
        }
    }




    var numLigacao = localStorage.getItem('numLigacao');
    var jaBateuPonto = localStorage.getItem('jaBateuPonto');
    var fezRonda = localStorage.getItem('fezRonda');
    var encontrouAlgoSuspeito = localStorage.getItem('encontrouAlgoSuspeito');
    var ligouEnergia = localStorage.getItem('ligouEnergia');
    var anotacaoEstranha = localStorage.getItem('anotacaoEstranha');




    cenario.addEventListener('click', () => {

        if (verificarObjeto(7, 2, 11, 22, 18, 57)) {
            if(!debugmenuBool)
            { 
            debugmenu.style.display = 'block';
            debugmenuBool = true;
            }
            else
            {
            debugmenu.style.display = 'none';
            debugmenuBool = false;
            }
        } 
        if (verificarObjeto(24, 4, 11, 26, 27, 36)) {
            if (encontrouAlgoSuspeito === '0') {
                som('terror.mp3');
                localStorage.setItem('encontrouAlgoSuspeito', '1');
                msgEstatica('Santo Deus!! Preciso reportar isso imediatamente!!');
            }
            else {
                msgEstatica('As marcas continuam aqui...');
            }
        }

        if (verificarObjeto(27, 2, 43, 46, 65, 87)) {
            if (ligouEnergia === '0') {
                som('blip.wav');
                msgEstatica('Energia restaurada');
                localStorage.setItem('ligouEnergia', '1');
                // window.location.reload();//att pra mudar a foto
            }
            else {
                msgEstatica('<font style="color:yellow;font-family:Georgia">Luz ja foi restaurada</font>');
                som('blip.wav');

                quartoAtual = 27;
                lado = 2;
            }
            msgEstaticaSemFundo('Painel de Energia');
            RecarregarParedes();
        }

        if (verificarObjeto(1, 1, 27, 66, 36, 72)) {
            som('papel.wav');
            //msgEstatica('Caderno de anotacoes');
            MostrarNota();
        }
        if (verificarObjeto(1, 2, 57, 70, 87, 94)) {
            //msgEstatica('Radio');
            if (radioLigado) {
                radio.pause();
                radio.currentTime = 0;
                radioLigado = false;
            }
            else {
                radio = som('radio.wav', true);
                radioLigado = true;
            }

        }
        if (verificarObjeto(10, 2, 42, 42, 57, 66)) {
            if (jaBateuPonto === '0') {
                msgEstatica('Ponto registrado');
                som('blip.wav');
                localStorage.setItem('jaBateuPonto', '1');
            }
            else {
                msgEstatica('<font style="color:red;font-family:Georgia">Ponto ja foi registrado</font>');
                som('blip.wav');
            }
        }
        if (verificarObjeto(14, 1, 29, 3, 67, 93) ||
            verificarObjeto(21, 4, 33, 2, 65, 93) ||
            verificarObjeto(44, 2, 60, 16, 84, 71) ||
            verificarObjeto(42, 4, 42, 1, 66, 71) ||
            verificarObjeto(37, 4, 51, 11, 81, 71) ||
            verificarObjeto(28, 4, 21, 3, 71, 99) ||
            verificarObjeto(2, 3, 44, 7, 71, 70) ||
            verificarObjeto(44, 4, 65, 12, 81, 68)) {
            msgEstatica('Porta trancada');
            som('trancado.mp3');
        }
        if (verificarObjeto(5, 4, 12, 22, 87, 87)) {
            msgEstatica('Trancada');
            som('trancado.mp3');
        }
        if (verificarObjeto(8, 1, 1, 30, 30, 98)) {
            som('xixi.mp3');
        }
        if (verificarObjeto(1, 2, 20, 77, 33, 86) || verificarObjeto(1, 1, 92, 75, 100, 86)) {
            //falas
            som('telefone.wav');
            if (numLigacao === '0') {
                msgEstatica('-Hey novato, aqui é o Júlio, seu colega. Bem vindo ao seu primeiro dia.<br>-Depois dê uma olhada na empresa, e nao esqueça de registrar o horario-ponto', 10000);
                localStorage.setItem('numLigacao', '1');
            }
            else if (numLigacao === '1') {
                if (jaBateuPonto === '0') {
                    msgEstatica('-Hey novato, não vi seu registro da noite ainda! Não esqueça de fazer.', 5000);
                }
                else {
                    msgEstatica('-Seu registro chegou aqui no sistema. Até logo.<br>-Se precisar de algo, me ligue..', 7000);
                    localStorage.setItem('numLigacao', '2');
                }

            }
            else if (numLigacao === '2') {
                if (fezRonda === '0') {
                    msgEstatica('-Hey novato, vá conheçer a empresa garoto, depois me ligue caso encontrar algo suspeito.', 5000);
                }
                else {
                    if (encontrouAlgoSuspeito !== '0') {
                        msgEstatica('-Oque voce viu? Não dê bola para isso, pelo menos por enquanto.<br>-Apenas...fique de olho..<br>-Se cuide ai!', 10000);
                        localStorage.setItem('numLigacao', '3');
                    }
                    else {
                        msgEstatica('-Gostou da empresa garoto? Tranquila né!.<br>-Enfim, se precisar de algo, me ligue..<br>-Se cuide ai!', 10000);
                        localStorage.setItem('numLigacao', '3');
                    }

                }
            }
            else if (numLigacao === '3') {
                if (encontrouAlgoSuspeito !== '0') {
                    msgEstatica('-Não dê bola para oque voce viu, ok?.<br>-Apenas...se cuide..<br>', 10000);
                    localStorage.setItem('numLigacao', '4');
                }
                else {

                    msgEstatica('....', 3000);
                    localStorage.setItem('numLigacao', '3');
                    telefoneMudo();
                }
            }
            else if (numLigacao === '4') {
                if (ligouEnergia === '0') {
                    msgEstatica('-Estou vendo que estão sem energia aqui.<br>-Desça lá e ligue no painel<br>-Me avise quando ligar', 10000);
                    localStorage.setItem('numLigacao', '5');
                }
                else {
                    msgEstatica('-Otimo,vi que ja ligou a luz<br>-Otimo trabalho!<br>-Se cuide ai!', 10000);
                    localStorage.setItem('numLigacao', '6');
                }

            }
            else if (numLigacao === '5') {
                if (ligouEnergia === '0') {
                    msgEstatica('-Estão sem energia aqui ainda novato!!.<br>-Desça lá e ligue no painel RÁPIDOOO!', 10000);
                    localStorage.setItem('numLigacao', '5');
                }
                else {
                    msgEstatica('-Finalmente!! Luz funcionando', 10000);
                    localStorage.setItem('numLigacao', '6');
                }

            }
            else if (numLigacao === '6') {
                msgEstatica('....', 3000);
                localStorage.setItem('numLigacao', '7');
                telefoneMudo();
                anotacaoEstranha = '1';
                localStorage.setItem('anotacaoEstranha', '1');
            }
            else if (numLigacao === '7') {
                if (visualizou_anotacaoEstranha == '1') {
                    msgEstatica('-Como assim? Acho que tu ta com sono, ta vendo coisas..<br>', 7000);
                    localStorage.setItem('numLigacao', '8');
                }
                else {
                    msgEstatica('....', 3000);
                    localStorage.setItem('numLigacao', '7');
                    telefoneMudo();
                    anotacaoEstranha = '1';
                    localStorage.setItem('anotacaoEstranha', '1');
                }
            }
            else if (numLigacao === '8') {
                if (tempoEspera_concluido && ultimoTelefonema === false) {
                    msgEstatica('VOCE VAI MORRER! NOVATO', 7000);
                    som('terror.mp3');
                    localStorage.setItem('numLigacao', '9');
                    ultimoTelefonema = true
                }
                else {
                    msgEstatica('....', 3000);
                    localStorage.setItem('numLigacao', '8');
                    telefoneMudo();
                }

            }
            else if (numLigacao === '9' && ultimoTelefonema) {

                msgEstatica('....', 3000);

                telefoneMudo();

                var indexfade = 100;
                var aa = setInterval(() => {
                    if (indexfade !== 0) {
                        indexfade--;
                        cenario.style.opacity = indexfade * 0.1;
                    }
                    else {
                        clearInterval(aa);
                        quartoAtual = 1; lado = 1;
                        RecarregarParedes();

                        var aa2 = setInterval(() => {
                            if (indexfade !== 100) {
                                indexfade++;
                                cenario.style.opacity = indexfade * 0.1;
                            }
                            else {
                                clearInterval(aa2);
                                localStorage.setItem('numLigacao', '10');
                            }
                        }, 200);




                    }
                }, 100);


            }
            else if (numLigacao === '10') {
                setTimeout(() => {
                    msgEstatica('-Alo?? Esta ai? Que brincadeira foi aquela?', 5000);
                    setTimeout(() => {
                        msgEstatica('-<i>Ola novato,aqui é o João, pegou no sono? haha</i>', 5000);
                        setTimeout(() => {
                            msgEstatica('João? Quem é voce? Cade o Julio??', 5000);
                            setTimeout(() => {
                                msgEstatica('-<i>Julio? Conheçeu ele?</i>', 5000);
                                setTimeout(() => {
                                    msgEstatica('-Claro, falei com ele a noite toda!!', 5000);
                                    setTimeout(() => {
                                        msgEstatica('-<i>Oque??? Ta brincando comigo novato?<br>Julio era o antigo vigia...</i>', 5000);
                                        setTimeout(() => {
                                            msgEstatica('-<i>...ele foi assasinado faz uns 2 meses.</i>', 5000);
                                            setTimeout(() => {
                                                msgEstatica('-Não é possivel! Devo ter sonhado. Obrigado João...', 5000);
                                                setTimeout(() => {
                                                    var nomeNota = 'nota4.jpg';
                                                    telefoneMudo();
                                                    setTimeout(() => {
                                                        msgEstatica('Oque está acontecendo...não pode ter sido minha imaginação..', 7000);
                                                        setTimeout(() => {
                                                            msgEstatica('As marcas de sangue! Tenho que ver se estão lá ainda!', 7000);
                                                            localStorage.setItem('numLigacao', '10');

                                                            var vvvv = setInterval(() => {
                                                                if (verificarObjeto(24, 4, 11, 26, 27, 36)) {
                                                                    clearInterval(vvvv);
                                                                    som('passos.mp3');
                                                                    setTimeout(() => {
                                                                        som('terror.mp3');
                                                                        var indexfade = 100;
                                                                        var aa = setInterval(() => {
                                                                            if (indexfade !== 0) {
                                                                                indexfade--;
                                                                                cenario.style.opacity = indexfade * 0.1;
                                                                            }
                                                                            else {


                                                                                localStorage.setItem('numLigacao', '0');
                                                                                localStorage.setItem('jaBateuPonto', '0');
                                                                                localStorage.setItem('fezRonda', '0');
                                                                                localStorage.setItem('encontrouAlgoSuspeito', '0');
                                                                                localStorage.setItem('ligouEnergia', '0');
                                                                                localStorage.setItem('anotacaoEstranha', '0');
                                                                                localStorage.setItem('visualizou_anotacaoEstranha', '0');

                                                                                window.location.href = 'fim.html';
                                                                            }
                                                                        }, 100);

                                                                    }, 8000);
                                                                }
                                                            }, 1);

                                                        }, 10000);
                                                    }, 10000);
                                                }, 5000);
                                            }, 5000);
                                        }, 5000);
                                    }, 5000);
                                }, 5000);
                            }, 5000);
                        }, 5000);
                    }, 5000);
                }, 5000);

            }




        }
    });





    function fadeIN(voids) {
        let i = 100;
        let lp1 = setInterval(() => {


            if (i <= 0) {

                clearInterval(lp1);
                voids();
                switch (lado) {
                    case 1:
                        cenario.src = 'rooms/' + quartoAtual + '/1.jpg';
                        break;
                    case 2:
                        //poe a img de desligada,se nao ativou a luz
                        if (localStorage.getItem('ligouEnergia') === '0') {
                            if (quartoAtual === 27 && lado === 2) {
                                cenario.src = 'rooms/27/2_2.jpg';
                            } else {
                                cenario.src = 'rooms/' + quartoAtual + '/2.jpg';

                            }
                        } else {
                            cenario.src = 'rooms/' + quartoAtual + '/2.jpg';
                        }
                        break;
                    case 3:
                        cenario.src = 'rooms/' + quartoAtual + '/3.jpg';
                        break;
                    case 4:
                        cenario.src = 'rooms/' + quartoAtual + '/4.jpg';
                        break;
                }
                let lp2 = setInterval(() => {
                    if (i >= 100) {

                        clearInterval(lp2);



                    } else {
                        i++;
                        cenario.style.opacity = i * 0.1;
                    }
                }, 10);



            } else {
                i--;
                cenario.style.opacity = i * 0.1;
            }
        }, 10);
    }




    //renderiza ao mudar de quarto
    var i = 0;
    var lp2 = setInterval(() => {
        if (i === 100) {
            clearInterval(lp2);
        }
        else {
            i++;
            cenario.style.opacity = i * 0.1;
            switch (lado) {
                case 1: cenario.src = 'rooms/' + quartoAtual + '/1.jpg'; break;
                case 2:
                    //poe a img de desligada,se nao ativou a luz
                    if (localStorage.getItem('ligouEnergia') === '0') {
                        if (quartoAtual === 27 && lado === 2) {
                            cenario.src = 'rooms/27/2_2.jpg';
                        }
                        else {
                            cenario.src = 'rooms/' + quartoAtual + '/2.jpg';
                        }
                    }
                    else {
                        cenario.src = 'rooms/' + quartoAtual + '/2.jpg';
                    }
                    break;
                case 3: cenario.src = 'rooms/' + quartoAtual + '/3.jpg'; break;
                case 4: cenario.src = 'rooms/' + quartoAtual + '/4.jpg'; break;

            }
            //poe a img de desligada,se nao ativou a luz
            if (localStorage.getItem('ligouEnergia') === '0') {
                if (quartoAtual === 27 && lado === 2) {
                    cenario.src = 'rooms/27/2_2.jpg';
                }
            }
        }
    }, 10);


    if (dificuldade !== 'facil') {
        document.getElementById('lanterna').addEventListener('mousemove', (x) => {
            var reveal = document.getElementById('reveal');
            reveal.style.left = x.pageX - reveal.offsetWidth / 2 + 'px';
            reveal.style.top = x.pageY - reveal.offsetHeight / 2 + 'px';
            reveal.style.display = 'block';
        });

        document.getElementById('lanterna').addEventListener('mouseleave', () => {
            var reveal = document.getElementById('reveal');
            reveal.style.display = 'none';
        });
    }
    else {
        document.getElementById('lanterna').id = 'aaaaaaaaalanterna';
        document.getElementById('reveal').id = 'aaaaaaaaareveal';
    }



    document.addEventListener('mousemove', (e) => {
        let x = e.pageX;
        let y = e.pageY;
        let ww = window.innerWidth;
        let wh = window.innerHeight;
        xMouse = parseInt((x / ww) * 100);
        yMouse = parseInt((y / wh) * 100);
    });



    var visaoNoturna = false;

    setInterval(() => {
        if (visaoNoturna) {
            cenario.style.filter = ' sepia(100%) saturate(100%) hue-rotate(100deg) brightness(300%) contrast(100%)';
        }
        else {
            if (carregouTudo) {
                cenario.style.filter = 'sepia(' + localStorage.getItem('sepia') + '%) ' +
                    'saturate(' + localStorage.getItem('saturate') + '%) ' +
                    'hue-rotate(' + localStorage.getItem('hue-rotate') + 'deg) ' +
                    'brightness(' + localStorage.getItem('brightness') + '%) ' +
                    'contrast(' + localStorage.getItem('contrast') + '%)';
            }
        }
    }, 100);

    document.addEventListener('keypress', (x) => {
        if (x.key === 'i') {
            visaoNoturna = !visaoNoturna;
        }
    });


    //loop 1 seg
    setInterval(() => {
        jaBateuPonto = localStorage.getItem('jaBateuPonto');
        numLigacao = localStorage.getItem('numLigacao');
        fezRonda = localStorage.getItem('fezRonda');
        encontrouAlgoSuspeito = localStorage.getItem('encontrouAlgoSuspeito');
        ligouEnergia = localStorage.getItem('ligouEnergia');
        anotacaoEstranha = localStorage.getItem('anotacaoEstranha');
        visualizou_anotacaoEstranha = localStorage.getItem('visualizou_anotacaoEstranha');


        if (jaBateuPonto === '1') {
            nomeNota = 'nota2.jpg';
            if (fezRonda === '1') {
                nomeNota = 'nota3.jpg';
                if (ligouEnergia === '1') {
                    nomeNota = 'nota4.jpg';
                    if (anotacaoEstranha === '1') {
                        nomeNota = 'nota5.jpg';
                        if (visualizou_anotacaoEstranha === '1') {
                            tempoEspera++;
                            console.log(tempoEspera);
                            if (tempoEspera >= 500) {
                                tempoEspera = 500;
                                tempoEspera_concluido = true;
                            }
                        }
                    }
                }
            }
        }

        if (tempoEspera_concluido && ultimoTelefonema === false && numLigacao === '8') {
            if (quartoAtual === 1) {
                som('telefone.wav');
                msgEstaticaSemFundo('<font style="color:lime;font-family:Georgia">Atenda o telefone</font>');
            }
            else {
                msgEstaticaSemFundo('Telefone está tocando. <br><font style="color:yellow;font-family:Georgia">Va ate o telefone</font>');
            }
        }
    }, 1000);


    //msg no canto da tela
    cenario.addEventListener('mousemove', () => {

        if (verificarObjeto(1, 1, 27, 66, 36, 72)) {
            msgEstaticaSemFundo('Bloco de anotacoes');
        }
        else if (verificarObjeto(24, 4, 11, 26, 27, 36)) {
            if (encontrouAlgoSuspeito === '0')
                msgEstaticaSemFundo('SANGUE????');
            else
                msgEstaticaSemFundo('Marcas de sangue misteriosas');
        }
        else if (verificarObjeto(27, 2, 43, 46, 65, 87)) {
            msgEstaticaSemFundo('Painel de Energia');
        }
        else if (verificarObjeto(5, 4, 12, 22, 87, 87)) {
            msgEstaticaSemFundo('Armário de Chaves');
        }
        else if (verificarObjeto(1, 2, 57, 70, 87, 94)) {
            if (radioLigado)
                msgEstaticaSemFundo('Radio - <font style="color:red;font-family:Georgia">Clique para desligar</font>');
            else
                msgEstaticaSemFundo('Radio - <font style="color:green;font-family:Georgia">Clique para ligar </font>');
        }
        else if (verificarObjeto(10, 2, 42, 42, 57, 66)) {
            msgEstaticaSemFundo('Relógio-Ponto');
        }
        else if (verificarObjeto(14, 1, 29, 3, 67, 93)) {
            msgEstaticaSemFundo('Ambulatório');
        }
        else if (verificarObjeto(8, 1, 1, 30, 30, 98)) {
            msgEstaticaSemFundo('Vaso Sanitário - <font style="color:yellow;font-family:Georgia">Clique para urinar</font>');
        }
        else if (verificarObjeto(8, 1, 55, 19, 88, 59)) {
            msgEstaticaSemFundo('Pia');
        }
        else if (verificarObjeto(30, 2, 63, 3, 71, 12)) {
            msgEstaticaSemFundo('Câmera de Segurança');
        }
        else if (verificarObjeto(28, 4, 21, 3, 71, 99)) {
            msgEstaticaSemFundo('Portao de Ferro');
        }
        else if (verificarObjeto(14, 1, 29, 3, 67, 93) ||
            verificarObjeto(21, 4, 33, 2, 65, 93) ||
            verificarObjeto(44, 2, 60, 16, 84, 71) ||
            verificarObjeto(42, 4, 42, 1, 66, 71) ||
            verificarObjeto(37, 4, 51, 11, 81, 71) ||
            verificarObjeto(2, 3, 44, 7, 71, 70) ||
            verificarObjeto(44, 4, 65, 12, 81, 68)) {
            msgEstaticaSemFundo('Porta - <font style="color:yellow;font-family:Georgia">Clique para interagir</font>');
        }
        else if (verificarObjeto(1, 2, 20, 77, 33, 86) || verificarObjeto(1, 1, 92, 75, 100, 86)) {
            msgEstaticaSemFundo('Telefone');
        }
        else {
            msgEstaticaSemFundo('');
        }
    });














    preCarregarImagens();

    function preCarregarImagens() {
        var imagens = [
            'rooms/1/1.jpg',
            'rooms/1/2.jpg',
            'rooms/1/3.jpg',
            'rooms/1/4.jpg',
            'rooms/2/1.jpg',
            'rooms/2/2.jpg',
            'rooms/2/3.jpg',
            'rooms/2/4.jpg',
            'rooms/3/1.jpg',
            'rooms/3/2.jpg',
            'rooms/3/3.jpg',
            'rooms/3/4.jpg',
            'rooms/4/1.jpg',
            'rooms/4/2.jpg',
            'rooms/4/3.jpg',
            'rooms/4/4.jpg',
            'rooms/5/1.jpg',
            'rooms/5/2.jpg',
            'rooms/5/3.jpg',
            'rooms/5/4.jpg',
            'rooms/6/1.jpg',
            'rooms/6/2.jpg',
            'rooms/6/3.jpg',
            'rooms/6/4.jpg',
            'rooms/7/1.jpg',
            'rooms/7/2.jpg',
            'rooms/7/3.jpg',
            'rooms/7/4.jpg',
            'rooms/8/1.jpg',
            'rooms/8/2.jpg',
            'rooms/8/3.jpg',
            'rooms/8/4.jpg',
            'rooms/9/1.jpg',
            'rooms/9/2.jpg',
            'rooms/9/3.jpg',
            'rooms/9/4.jpg',
            'rooms/10/1.jpg',
            'rooms/10/2.jpg',
            'rooms/10/3.jpg',
            'rooms/10/4.jpg',
            'rooms/11/1.jpg',
            'rooms/11/2.jpg',
            'rooms/11/3.jpg',
            'rooms/11/4.jpg',
            'rooms/12/1.jpg',
            'rooms/12/2.jpg',
            'rooms/12/3.jpg',
            'rooms/12/4.jpg',
            'rooms/13/1.jpg',
            'rooms/13/2.jpg',
            'rooms/13/3.jpg',
            'rooms/13/4.jpg',
            'rooms/14/1.jpg',
            'rooms/14/2.jpg',
            'rooms/14/3.jpg',
            'rooms/14/4.jpg',
            'rooms/15/1.jpg',
            'rooms/15/2.jpg',
            'rooms/15/3.jpg',
            'rooms/15/4.jpg',
            'rooms/16/1.jpg',
            'rooms/16/2.jpg',
            'rooms/16/3.jpg',
            'rooms/16/4.jpg',
            'rooms/17/1.jpg',
            'rooms/17/2.jpg',
            'rooms/17/3.jpg',
            'rooms/17/4.jpg',
            'rooms/18/1.jpg',
            'rooms/18/2.jpg',
            'rooms/18/3.jpg',
            'rooms/18/4.jpg',
            'rooms/19/1.jpg',
            'rooms/19/2.jpg',
            'rooms/19/3.jpg',
            'rooms/19/4.jpg',
            'rooms/20/1.jpg',
            'rooms/20/2.jpg',
            'rooms/20/3.jpg',
            'rooms/20/4.jpg',
            'rooms/21/1.jpg',
            'rooms/21/2.jpg',
            'rooms/21/3.jpg',
            'rooms/21/4.jpg',
            'rooms/22/1.jpg',
            'rooms/22/2.jpg',
            'rooms/22/3.jpg',
            'rooms/22/4.jpg',
            'rooms/23/1.jpg',
            'rooms/23/2.jpg',
            'rooms/23/3.jpg',
            'rooms/23/4.jpg',
            'rooms/24/1.jpg',
            'rooms/24/2.jpg',
            'rooms/24/3.jpg',
            'rooms/24/4.jpg',
            'rooms/25/1.jpg',
            'rooms/25/2.jpg',
            'rooms/25/3.jpg',
            'rooms/25/4.jpg',
            'rooms/26/1.jpg',
            'rooms/26/2.jpg',
            'rooms/26/3.jpg',
            'rooms/26/4.jpg',
            'rooms/27/1.jpg',
            'rooms/27/2.jpg',
            'rooms/27/3.jpg',
            'rooms/27/4.jpg',
            'rooms/28/1.jpg',
            'rooms/28/2.jpg',
            'rooms/28/3.jpg',
            'rooms/28/4.jpg',
            'rooms/29/1.jpg',
            'rooms/29/2.jpg',
            'rooms/29/3.jpg',
            'rooms/29/4.jpg',
            'rooms/30/1.jpg',
            'rooms/30/2.jpg',
            'rooms/30/3.jpg',
            'rooms/30/4.jpg',
            'rooms/31/1.jpg',
            'rooms/31/2.jpg',
            'rooms/31/3.jpg',
            'rooms/31/4.jpg',
            'rooms/32/1.jpg',
            'rooms/32/2.jpg',
            'rooms/32/3.jpg',
            'rooms/32/4.jpg',
            'rooms/33/1.jpg',
            'rooms/33/2.jpg',
            'rooms/33/3.jpg',
            'rooms/33/4.jpg',
            'rooms/34/1.jpg',
            'rooms/34/2.jpg',
            'rooms/34/3.jpg',
            'rooms/34/4.jpg',
            'rooms/35/1.jpg',
            'rooms/35/2.jpg',
            'rooms/35/3.jpg',
            'rooms/35/4.jpg',
            'rooms/36/1.jpg',
            'rooms/36/2.jpg',
            'rooms/36/3.jpg',
            'rooms/36/4.jpg',
            'rooms/37/1.jpg',
            'rooms/37/2.jpg',
            'rooms/37/3.jpg',
            'rooms/37/4.jpg',
            'rooms/38/1.jpg',
            'rooms/38/2.jpg',
            'rooms/38/3.jpg',
            'rooms/38/4.jpg',
            'rooms/39/1.jpg',
            'rooms/39/2.jpg',
            'rooms/39/3.jpg',
            'rooms/39/4.jpg',
            'rooms/40/1.jpg',
            'rooms/40/2.jpg',
            'rooms/40/3.jpg',
            'rooms/40/4.jpg',
            'rooms/41/1.jpg',
            'rooms/41/2.jpg',
            'rooms/41/3.jpg',
            'rooms/41/4.jpg',
            'rooms/42/1.jpg',
            'rooms/42/2.jpg',
            'rooms/42/3.jpg',
            'rooms/42/4.jpg',
            'rooms/43/1.jpg',
            'rooms/43/2.jpg',
            'rooms/43/3.jpg',
            'rooms/43/4.jpg',
            'rooms/44/1.jpg',
            'rooms/44/2.jpg',
            'rooms/44/3.jpg', 'rooms/44/4.jpg',
        ];

        for (var i = 0; i < imagens.length; i++) {
            cenario.style.opacity = '0';
            var img = new Image();
            img.src = imagens[i];
            instrucao('Aguarde enquanto carregamos os cenários...<br>Avisaremos quando terminar');
        }
    }




    document.addEventListener('DOMContentLoaded', function () {
        instrucao('Aguarde enquanto carregamos os cenários...<br>Avisaremos quando terminar');
        cenario.style.filter = 'sepia(20%) saturate(25%) hue-rotate(-100deg) brightness(33%) contrast(120%)';
        window.addEventListener('load', function () {
            instrucao(' ');
            carregouTudo = true;

            if (!isMobile)
                instrucao('Todos cenários foram carregados com sucesso!<br><br>Movimentar:<br><font style="color:yellow">W</font>: Anda pra frente<br><font style="color:yellow">D</font>: Vira para a direita<br><font style="color:yellow">A</font>: Vira para a esquerda<br><br><font style="color:yellow">M</font>: Exibe/Oculta o mapa<br><font style="color:yellow">I</font>: Ativa/Desativa visão noturna',20000);
            else
                instrucao('Todos cenários foram carregados com sucesso!<br><br>Movimentar com touch (deslizando):<br><font style="color:yellow">Toque em Cima/Centro</font>: Anda pra frente<br><font style="color:yellow">Centro p/ Direita</font>: Vira para a direita<br><font style="color:yellow">Centro p/ Esquerda</font>: Vira para a esquerda<br><br><font style="color:yellow">Obs</font>: Controles de movimento, sao ativados no topo da tela, pra nao interferir nas interações com objetos ',20000);


            cenario.style.opacity = '1';


            if (isMobile) {
                var luzNot = document.createElement('button');
                luzNot.innerHTML='Visao Noturna';
                luzNot.textContent='Visao Noturna';
                luzNot.style.position='fixed';
                luzNot.style.right='41%';
                luzNot.style.bottom='10px';
                luzNot.style.fontSize='20px';
                luzNot.style.width='150px';
                document.body.append(luzNot);

                var maptg = document.createElement('button');
                maptg.innerHTML='Mapa';
                maptg.textContent='Mapa';
                maptg.style.position='fixed';
                maptg.style.right='43%';
                maptg.style.bottom='30px';
                maptg.style.width='100px';
                maptg.style.fontSize='20px';
                document.body.append(maptg);
                // visaoNoturna = !visaoNoturna;
                luzNot.addEventListener('click',()=>{
                    visaoNoturna = !visaoNoturna;
                });
                maptg.addEventListener('click',()=>{
                    mapToggle();
                });
            }
        });
    });








    function debugMenu() {
        let fundo = document.createElement('div');
        fundo.style.backgroundColor = 'black';
        fundo.style.color = 'aliceblue';
        fundo.style.width = '200px';
        //fundo.style.height = '200px';
        fundo.style.position = 'fixed';
        fundo.style.top = '10px';
        fundo.style.right = '10px';
        fundo.style.fontFamily = 'Arial';
        fundo.style.padding = '5px';
        fundo.style.display = 'none';
        fundo.style.fontSize = '70%';

        document.body.appendChild(fundo);

        var tamfonte = '120%';

        let item1 = document.createElement('p');
        item1.style.color = 'aliceblue';
        item1.innerHTML = 'aliceblue';
        item1.style.fontFamily = 'Arial';
        item1.style.fontSize = tamfonte;
        fundo.appendChild(item1);

        let item2 = document.createElement('p');
        item2.style.color = 'aliceblue';
        item2.innerHTML = 'aliceblue';
        item2.style.fontFamily = 'Arial';
        item2.style.fontSize = tamfonte;
        fundo.appendChild(item2);

        let item3 = document.createElement('p');
        item3.style.color = 'aliceblue';
        item3.innerHTML = 'aliceblue';
        item3.style.fontFamily = 'Arial';
        item3.style.fontSize = tamfonte;
        fundo.appendChild(item3);

        let item4 = document.createElement('p');
        item4.style.color = 'aliceblue';
        item4.innerHTML = 'aliceblue';
        item4.style.fontFamily = 'Arial';
        item4.style.fontSize = tamfonte;
        fundo.appendChild(item4);

        let portaria = document.createElement('p');
        portaria.style.color = 'black';
        portaria.style.backgroundColor = 'rgb(100 200 100)';
        portaria.innerHTML = 'Ir para Portaria';
        portaria.style.fontFamily = 'Arial';
        portaria.style.fontSize = '20px';
        portaria.style.width = '195px';
        portaria.style.position = 'block';
        portaria.style.marginTop = '5px';
        portaria.style.fontSize = tamfonte;
        fundo.appendChild(portaria);


        let objMisterioso = document.createElement('p');
        objMisterioso.style.color = 'black';
        objMisterioso.style.backgroundColor = 'rgb(100 200 100)';
        objMisterioso.innerHTML = 'Obj Misterioso';
        objMisterioso.style.fontFamily = 'Arial';
        objMisterioso.style.fontSize = '20px';
        objMisterioso.style.width = '195px';
        objMisterioso.style.position = 'block';
        objMisterioso.style.marginTop = '5px';
        objMisterioso.style.fontSize = tamfonte;
        fundo.appendChild(objMisterioso);

        let slaEnergia = document.createElement('p');
        slaEnergia.style.color = 'black';
        slaEnergia.style.backgroundColor = 'rgb(100 200 100)';
        slaEnergia.innerHTML = 'Ir para Chave';
        slaEnergia.style.fontFamily = 'Arial';
        slaEnergia.style.fontSize = '20px';
        slaEnergia.style.width = '195px';
        slaEnergia.style.position = 'block';
        slaEnergia.style.marginTop = '5px';
        slaEnergia.style.fontSize = tamfonte;
        fundo.appendChild(slaEnergia);

        let zerar = document.createElement('p');
        zerar.style.color = 'black';
        zerar.style.backgroundColor = 'rgb(200 100 100)';
        zerar.innerHTML = 'Reiniciar Storage';
        zerar.style.fontFamily = 'Arial';
        zerar.style.fontSize = '20px';
        zerar.style.width = '195px';
        zerar.style.position = 'block';
        zerar.style.marginTop = '5px';
        zerar.style.fontSize = tamfonte;
        fundo.appendChild(zerar);

        let item5 = document.createElement('p');
        item5.style.color = 'black';
        item5.style.backgroundColor = 'aliceblue';
        item5.innerHTML = 'Fazer Ronda';
        item5.style.fontFamily = 'Arial';
        item5.style.fontSize = '20px';
        item5.style.width = '195px';
        item5.style.position = 'block';
        item5.style.marginTop = '5px';
        item5.style.fontSize = tamfonte;
        fundo.appendChild(item5);


        let item6 = document.createElement('p');
        item6.style.color = 'black';
        item6.style.backgroundColor = 'aliceblue';
        item6.innerHTML = 'Fazer Registro';
        item6.style.fontFamily = 'Arial';
        item6.style.fontSize = '20px';
        item6.style.width = '195px';
        item6.style.position = 'block';
        item6.style.marginTop = '5px';
        item6.style.fontSize = tamfonte;
        fundo.appendChild(item6);

        let suspeito = document.createElement('p');
        suspeito.style.color = 'black';
        suspeito.style.backgroundColor = 'aliceblue';
        suspeito.innerHTML = 'Suspeito';
        suspeito.style.fontFamily = 'Arial';
        suspeito.style.fontSize = '20px';
        suspeito.style.width = '195px';
        suspeito.style.position = 'block';
        suspeito.style.marginTop = '5px';
        suspeito.style.fontSize = tamfonte;
        fundo.appendChild(suspeito);

        let ligarluz = document.createElement('p');
        ligarluz.style.color = 'black';
        ligarluz.style.backgroundColor = 'aliceblue';
        ligarluz.innerHTML = 'Ligar luz';
        ligarluz.style.fontFamily = 'Arial';
        ligarluz.style.fontSize = '20px';
        ligarluz.style.width = '195px';
        ligarluz.style.position = 'block';
        ligarluz.style.marginTop = '5px';
        ligarluz.style.fontSize = tamfonte;
        fundo.appendChild(ligarluz);

        let mostrarNota = document.createElement('p');
        mostrarNota.style.color = 'black';
        mostrarNota.style.backgroundColor = 'aliceblue';
        mostrarNota.innerHTML = 'Mostrar Nota';
        mostrarNota.style.fontFamily = 'Arial';
        mostrarNota.style.fontSize = '20px';
        mostrarNota.style.width = '195px';
        mostrarNota.style.position = 'block';
        mostrarNota.style.marginTop = '5px';
        mostrarNota.style.fontSize = tamfonte;
        fundo.appendChild(mostrarNota);

        let pularTempo = document.createElement('p');
        pularTempo.style.color = 'black';
        pularTempo.style.backgroundColor = 'aliceblue';
        pularTempo.innerHTML = 'Avançar Tempo';
        pularTempo.style.fontFamily = 'Arial';
        pularTempo.style.fontSize = '20px';
        pularTempo.style.width = '195px';
        pularTempo.style.position = 'block';
        pularTempo.style.marginTop = '5px';
        pularTempo.style.fontSize = tamfonte;
        fundo.appendChild(pularTempo);

        let pularTudo = document.createElement('p');
        pularTudo.style.color = 'black';
        pularTudo.style.backgroundColor = 'aliceblue';
        pularTudo.innerHTML = 'Avançar Tudo';
        pularTudo.style.fontFamily = 'Arial';
        pularTudo.style.fontSize = '20px';
        pularTudo.style.width = '195px';
        pularTudo.style.position = 'block';
        pularTudo.style.marginTop = '5px';
        pularTudo.style.fontSize = tamfonte;
        fundo.appendChild(pularTudo);

        pularTempo.addEventListener('click', () => {
            tempoEspera = 498;
            // tempoEspera_concluido = true;
            RecarregarParedes();
        });
        pularTudo.addEventListener('click', () => {
            numLigacao = '10';
            RecarregarParedes();
        });
        objMisterioso.addEventListener('click', () => {

            quartoAtual = 24;
            lado = 4;
            RecarregarParedes();
        });
        slaEnergia.addEventListener('click', () => {

            quartoAtual = 27;
            lado = 2;
            RecarregarParedes();
        });
        mostrarNota.addEventListener('click', () => {
            MostrarNota();
            RecarregarParedes();
        });
        portaria.addEventListener('click', () => {
            // window.location.href = 'room.html?quarto=1&lado=1';

            quartoAtual = 1; lado = 1;
            RecarregarParedes();
        });
        ligarluz.addEventListener('click', () => {
            localStorage.setItem('ligouEnergia', '1');
            RecarregarParedes();
        });
        suspeito.addEventListener('click', () => {
            localStorage.setItem('encontrouAlgoSuspeito', '1');
        });
        zerar.addEventListener('click', () => {
            localStorage.setItem('numLigacao', '0');
            localStorage.setItem('jaBateuPonto', '0');
            localStorage.setItem('fezRonda', '0');
            localStorage.setItem('encontrouAlgoSuspeito', '0');
            localStorage.setItem('ligouEnergia', '0');
            localStorage.setItem('anotacaoEstranha', '0');
            localStorage.setItem('visualizou_anotacaoEstranha', '0');
        });
        item5.addEventListener('click', () => {
            localStorage.setItem('fezRonda', '1');
        });
        item6.addEventListener('click', () => {
            localStorage.setItem('jaBateuPonto', '1');
        });

        setInterval(() => {
            item1.innerHTML = 'Mouse X: ' + xMouse + '%';
            item2.innerHTML = 'Mouse Y: ' + yMouse + '%';
            item3.innerHTML = 'Quarto: ' + quartoAtual;
            item4.innerHTML = 'Lado: ' + lado;
        }, 1);
        return fundo;
    }



    function _GET(s) {
        var url = window.location.href;
        var qp = new URLSearchParams(url.split('?')[1]);

        if (qp.has(s)) {
            return qp.get(s);
        }


    }

    function RecarregarParedes() {
        switch (lado) {
            case 1:
                cenario.src = 'rooms/' + quartoAtual + '/1.jpg';
                break;
            case 2:
                //poe a img de desligada,se nao ativou a luz
                if (localStorage.getItem('ligouEnergia') === '0') {
                    if (quartoAtual === 27 && lado === 2) {
                        cenario.src = 'rooms/27/2_2.jpg';
                    } else {
                        cenario.src = 'rooms/' + quartoAtual + '/2.jpg';

                    }
                } else {
                    cenario.src = 'rooms/' + quartoAtual + '/2.jpg';
                }
                break;
            case 3:
                cenario.src = 'rooms/' + quartoAtual + '/3.jpg';
                break;
            case 4:
                cenario.src = 'rooms/' + quartoAtual + '/4.jpg';
                break;
        }
    }


    function msg(msg) {
        mensagem.innerHTML = msg;
    }
    function som(audio, loop = false) {
        var a = new Audio('audio/' + audio);
        a.volume = 1;
        if (loop)
            a.loop = true;
        a.play();
        return a;
    }

    somAmbiente('ambiente.mp3', true);
    function somAmbiente(audio, loop = false) {
        var ab = new Audio('audio/' + audio);
        ab.volume = 0.2;
        if (loop)
            ab.loop = true;
        ab.play();
    }

    function msgEstatica(msg, tempo = 3000) {
        mensagem.innerHTML = msg;
        mensagem.style.backgroundColor = 'black';
        mensagem.style.border = '1px solid aliceblue';
        setTimeout(() => {
            mensagem.innerHTML = '';
            mensagem.style.backgroundColor = 'transparent';
            mensagem.style.border = 'none';
        }, tempo);
    }
    function msgEstaticaSemFundo(msg) {
        if (msg === '') {
            mensagem2.style.display = 'none';
        }
        else {
            mensagem2.innerHTML = msg;
            mensagem2.style.display = 'block';
        }

    }


    instrucao('Aguarde enquanto carregamos os cenários...');

    function instrucao(msg,tempo = 10000) {

        mensagem3.innerHTML = msg;
        mensagem3.style.display = 'block';
        setTimeout(() => {
            mensagem3.style.display = 'none';
        }, tempo);

    }

    function telefoneMudo() {
        setTimeout(() => {
            som('telefone.wav');
            setTimeout(() => {
                som('telefone.wav');
                setTimeout(() => {
                    som('telefone.wav');
                }, 1000);
            }, 1000);
        }, 1000);
    }


    function verificarObjeto(N_quarto, parede, x1, y1, x2, y2) {

        if (quartoAtual === N_quarto && lado === parede && xMouse >= x1 && yMouse >= y1 && xMouse <= x2 && yMouse <= y2) {
            return true;
        }
        return false;
    }



</script>

</html>